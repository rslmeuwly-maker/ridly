<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>RIDLY ‚Äî Riders Map</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --green:#22c55e;
  --green-dark:#16a34a;
  --bg:#000;
  --text:#f9fafb;
  --dim:#9aa5b1;
  --accent:#38bdf8;
  --panel:rgba(9,13,23,.82);
  --border:rgba(255,255,255,.12);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  background:radial-gradient(circle at top left,#022c22 0,#020617 40%,#000 100%);
  color:var(--text);
  font-family:Outfit,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  overflow:hidden;
}

/* ================== INTRO RIDLY : GEO -> SPOTS -> LOGO ================== */
#intro{
  position:fixed;
  inset:0;
  background:#020617;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
  overflow:hidden;
  transition:opacity .6s ease-out;
}
#intro::before{
  content:"";
  position:absolute;
  inset:-40%;
  background:
    radial-gradient(circle at center, rgba(34,197,94,.28), transparent 55%),
    radial-gradient(circle at top left, rgba(56,189,248,.32), transparent 55%),
    radial-gradient(circle at bottom right, rgba(15,23,42,1), rgba(0,0,0,1));
  opacity:0;
  animation:introHalo 1.4s ease-out forwards .1s;
}
#intro::after{
  content:"";
  position:absolute;
  inset:-20px;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='noStitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.16'/%3E%3C/svg%3E");
  mix-blend-mode:soft-light;
  opacity:.7;
  pointer-events:none;
  animation:introNoise .35s steps(3,end) infinite;
}

.intro-card{
  position:relative;
  width:100%;
  max-width:520px;
  min-height:230px;
  padding:1.6rem 2rem;
  border-radius:0;
  background:transparent;
  border:none;
  box-shadow:none;
  overflow:visible;
}
.intro-step{
  position:absolute;
  inset:1.2rem 1.6rem;
  display:flex;
  flex-direction:row;
  align-items:center;
  gap:1.5rem;
  opacity:0;
  transform:translateY(10px) scale(.97);
  transition:opacity .45s ease-out, transform .45s ease-out;
}
.intro-step.active{opacity:1;transform:translateY(0) scale(1);}
@media (max-width:640px){
  .intro-card{padding:1.4rem 1.4rem;}
  .intro-step{inset:1.1rem;flex-direction:column;align-items:flex-start;}
}

/* --- √âTAPE 1 : GEOLOC (radar) --- */
.intro-radar{
  position:relative;
  width:140px;
  height:140px;
  border-radius:999px;
  background:radial-gradient(circle at center,#022c22,#020617 60%,#020617);
  box-shadow:0 0 40px rgba(34,197,94,.35);
  overflow:hidden;
}
.radar-grid{
  position:absolute;
  inset:-20px;
  background-image:
    linear-gradient(to right, rgba(15,23,42,.7) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(15,23,42,.7) 1px, transparent 1px);
  background-size:18px 18px;
  mix-blend-mode:soft-light;
}
.radar-circle{
  position:absolute; inset:18%;
  border-radius:999px;
  border:1px solid rgba(34,197,94,.35);
}
.radar-circle.c2{inset:32%;opacity:.7;}
.radar-circle.c3{inset:46%;opacity:.5;}
.radar-sweep{
  position:absolute;
  inset:-10%;
  background:conic-gradient(from 210deg, rgba(34,197,94,0) 0deg, rgba(34,197,94,.8) 60deg, rgba(34,197,94,0) 120deg);
  opacity:.9;
  mix-blend-mode:screen;
  animation:radarSweep 2.2s linear infinite;
}
.radar-dot{
  position:absolute;
  width:12px;height:12px;
  border-radius:999px;
  background:var(--green);
  box-shadow:0 0 12px rgba(34,197,94,.9);
  left:50%;top:50%;
  transform:translate(-50%,-50%);
}
.radar-dot::before{
  content:"";
  position:absolute;
  inset:-4px;
  border-radius:inherit;
  border:2px solid rgba(34,197,94,.7);
  opacity:0;
  animation:radarPulse 1.6s ease-out infinite;
}

/* texte √©tape 1 */
.intro-text-block{flex:1;}
.intro-badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:3px 9px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.6);
  font-size:.65rem;
  letter-spacing:.16em;
  text-transform:uppercase;
  color:var(--dim);
  margin-bottom:.5rem;
}
.intro-badge span{
  display:inline-block;
  width:6px;height:6px;
  border-radius:999px;
  background:var(--green);
  box-shadow:0 0 10px rgba(34,197,94,.8);
}
.intro-title{font-size:1.1rem;font-weight:700;margin-bottom:.25rem;}
.intro-sub{font-size:.82rem;color:var(--dim);}

/* --- √âTAPE 2 : SPOTS SUR LA CARTE --- */
.intro-map-mini{
  position:relative;
  width:150px;
  height:150px;
  border-radius:1.3rem;
  background:#020617;
  border:1px solid rgba(56,189,248,.6);
  box-shadow:0 0 0 1px rgba(15,23,42,1), 0 0 35px rgba(56,189,248,.35);
  overflow:hidden;
}
.map-bg{
  position:absolute;
  inset:-30px;
  background:
    radial-gradient(circle at 20% 10%, rgba(34,197,94,.2), transparent 55%),
    radial-gradient(circle at 80% 80%, rgba(56,189,248,.24), transparent 55%),
    linear-gradient(135deg,#020617,#020617 50%,#020617);
}
.map-grid{
  position:absolute;
  inset:-30px;
  background-image:
    linear-gradient(to right, rgba(15,23,42,.7) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(15,23,42,.7) 1px, transparent 1px);
  background-size:18px 18px;
  mix-blend-mode:soft-light;
  animation:introGridMove 6s linear infinite;
}
.map-spot{
  position:absolute;
  width:10px;height:10px;
  border-radius:999px;
  background:var(--green);
  box-shadow:0 0 12px rgba(34,197,94,.9);
}
.map-spot::before{
  content:"";
  position:absolute;
  inset:-4px;
  border-radius:inherit;
  border:1px solid rgba(34,197,94,.8);
  opacity:0;
  animation:introSpotPulse 1.8s ease-out infinite;
}
.map-spot.s1{left:30%;top:32%;}
.map-spot.s2{left:64%;top:46%;animation-delay:.25s;}
.map-spot.s3{left:42%;top:68%;animation-delay:.5s;}
.map-spot.me{
  width:12px;height:12px;
  background:#f97316;
  box-shadow:0 0 12px rgba(249,115,22,.9);
}
.map-spot.me::before{border-color:rgba(249,115,22,.8);}

/* --- √âTAPE 3 : LOGO RIDLY --- */
.intro-logo-center{
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  gap:.6rem;
}
.intro-logo-circle{
  width:90px;height:90px;
  border-radius:24px;
  background:#000;
  border:1px solid rgba(148,163,184,.7);
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 0 24px rgba(34,197,94,.7);
}
.intro-logo-circle img{width:70px;height:70px;object-fit:contain;}
.intro-logo-main{
  font-size:1.4rem;
  font-weight:800;
  letter-spacing:.22em;
  text-transform:uppercase;
}
.intro-logo-sub{
  font-size:.78rem;
  letter-spacing:.16em;
  text-transform:uppercase;
  color:var(--dim);
}
#intro.fade-out{opacity:0;pointer-events:none;}

/* ================== ANIMATIONS ================== */
@keyframes introHalo{0%{opacity:0;transform:scale(1.05);}100%{opacity:1;transform:scale(1);}}
@keyframes introNoise{0%{transform:translate(0,0);}50%{transform:translate(-6px,3px);}100%{transform:translate(3px,-4px);}}
@keyframes radarSweep{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
@keyframes radarPulse{0%{opacity:.8;transform:scale(1);}60%{opacity:0;transform:scale(2.2);}100%{opacity:0;transform:scale(2.5);}}
@keyframes introGridMove{0%{transform:translate(0,0);}100%{transform:translate(-30px,20px);}}
@keyframes introSpotPulse{0%{opacity:.8;transform:scale(1);}60%{opacity:0;transform:scale(2);}100%{opacity:0;transform:scale(2.3);}}

/* ================== PAGE PRINCIPALE ================== */
header{
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 18px;
  background:rgba(0,0,0,.7);
  backdrop-filter:blur(10px);
  border-bottom:1px solid rgba(255,255,255,.1);
  position:sticky;top:0;z-index:10;
  opacity:0;animation:fadeIn 1s ease 4.3s forwards;
}
.brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:#fff}
.brand img{width:40px;height:40px;border-radius:12px;background:#fff}
.brand span{font-weight:800;font-size:18px}

.btn-login{
  padding:7px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.25);
  background:rgba(0,0,0,.8);
  color:#fff;
  font-size:13px;
  font-weight:800;
  text-decoration:none;
}
.btn-login:hover{border-color:var(--green);color:var(--green);}

.hero{
  height:calc(100vh - 70px);
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  flex-direction:column;
  padding:20px;
  opacity:0;
  animation:fadeIn 1.2s ease 4.5s forwards;
}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px);}
  to{opacity:1;transform:translateY(0);}
}
.hero img{
  width:110px;height:110px;border-radius:24px;
  margin-bottom:18px;
  box-shadow:0 0 22px rgba(34,197,94,.5);
  border:1px solid rgba(255,255,255,.1);
  background:#fff;
}
h1{
  font-size:32px;
  font-weight:800;
  line-height:1.15;
  letter-spacing:.02em;
}
h1 span{color:var(--green);}
p{
  color:var(--dim);
  font-size:14px;
  max-width:420px;
  margin:12px auto 18px;
}
.btn-primary{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  padding:12px 22px;
  border-radius:999px;
  font-size:15px;
  font-weight:900;
  text-decoration:none;
  background:linear-gradient(135deg,var(--green),var(--green-dark));
  color:#02130b;
  box-shadow:0 14px 40px rgba(0,0,0,.8);
}
.btn-primary:hover{filter:brightness(1.05);}

.small-link{
  margin-top:14px;
  font-size:12px;
  color:rgba(255,255,255,.82);
  opacity:.95;
  cursor:pointer;
  user-select:none;
}
.small-link:hover{color:#fff;text-decoration:underline;}

footer{
  text-align:center;
  font-size:11px;
  color:#9aa5b1;
  padding:12px;
  opacity:0;
  animation:fadeIn 1.2s ease 4.7s forwards;
}

/* ================== MODAL CODE RIDLY ================== */
.modal{
  position:fixed;
  inset:0;
  z-index:99999;
  display:none;
  align-items:center;
  justify-content:center;
  padding:18px;
}
.modal.open{display:flex;}
.modal-dim{
  position:absolute; inset:0;
  background:rgba(0,0,0,.72);
  backdrop-filter:blur(6px);
}
.modal-card{
  position:relative;
  width:min(520px,100%);
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow:0 30px 90px rgba(0,0,0,.75);
  padding:18px;
  text-align:left;
}
.modal-title{
  font-size:15px;
  font-weight:900;
  letter-spacing:.02em;
}
.modal-sub{
  margin-top:8px;
  font-size:13px;
  color:var(--dim);
  line-height:1.45;
}
.field{
  margin-top:14px;
}
.input{
  width:100%;
  background:rgba(0,0,0,.55);
  border:1px solid rgba(255,255,255,.22);
  color:#fff;
  border-radius:12px;
  padding:12px 12px;
  font-size:14px;
  font-weight:800;
  outline:none;
}
.input:focus{
  border-color:var(--green);
  box-shadow:0 0 0 3px rgba(34,197,94,.22);
}
.row-btns{
  display:flex;
  gap:10px;
  margin-top:12px;
  flex-wrap:wrap;
}
.btn{
  border:0;
  border-radius:12px;
  padding:11px 14px;
  font-weight:900;
  cursor:pointer;
  font-size:13px;
}
.btn-ok{
  background:linear-gradient(135deg,var(--green),var(--green-dark));
  color:#03180c;
  box-shadow:0 14px 40px rgba(0,0,0,.6);
  flex:1 1 160px;
}
.btn-cancel{
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.18);
  color:#fff;
  flex:1 1 160px;
}
.msg{
  margin-top:10px;
  font-size:12px;
  font-weight:800;
  padding:10px 12px;
  border-radius:12px;
  display:none;
}
.msg.err{
  display:block;
  background:rgba(255,80,80,.12);
  border:1px solid rgba(255,80,80,.35);
  color:#ffb2b2;
}
.msg.ok{
  display:block;
  background:rgba(34,197,94,.12);
  border:1px solid rgba(34,197,94,.35);
  color:#98ffc2;
}
</style>
</head>

<body>

<!-- INTRO GEO / SPOTS / LOGO -->
<div id="intro">
  <div class="intro-card">

    <!-- STEP 1: GEO -->
    <div class="intro-step step-geo active">
      <div class="intro-radar">
        <div class="radar-grid"></div>
        <div class="radar-circle c1"></div>
        <div class="radar-circle c2"></div>
        <div class="radar-circle c3"></div>
        <div class="radar-sweep"></div>
        <div class="radar-dot"></div>
      </div>
      <div class="intro-text-block">
        <div class="intro-badge">
          <span></span> G√âOLOCALISATION
        </div>
        <div class="intro-title">On te trouve sur la carte‚Ä¶</div>
        <div class="intro-sub" id="geo-label">
          Autorise la localisation pour voir les spots autour de toi.
        </div>
      </div>
    </div>

    <!-- STEP 2: SPOTS -->
    <div class="intro-step step-spots">
      <div class="intro-map-mini">
        <div class="map-bg"></div>
        <div class="map-grid"></div>
        <div class="map-spot me"></div>
        <div class="map-spot s1"></div>
        <div class="map-spot s2"></div>
        <div class="map-spot s3"></div>
      </div>
      <div class="intro-text-block">
        <div class="intro-badge">
          <span></span> SPOTS AUTOUR DE TOI
        </div>
        <div class="intro-title">On charge les parks & street spots.</div>
        <div class="intro-sub">
          Skateparks, rues, shops partenaires, cours‚Ä¶ tout appara√Æt sur la carte.
        </div>
      </div>
    </div>

    <!-- STEP 3: LOGO RIDLY -->
    <div class="intro-step step-logo">
      <div class="intro-logo-center">
        <div class="intro-logo-circle">
          <img src="image/1logo_ridly.png" alt="RIDLY">
        </div>
        <div class="intro-logo-main">RIDLY</div>
        <div class="intro-logo-sub">SPOTS ‚Ä¢ RIDERS ‚Ä¢ CLIPS</div>
      </div>
    </div>

  </div>
</div>

<!-- CONTENU PRINCIPAL -->
<header>
  <a href="#" class="brand" onclick="return false;">
    <img src="image/1logo_ridly.png" alt="RIDLY">
    <span>RIDLY</span>
  </a>

  <!-- ‚úÖ RSL libre -->
  <a href="https://rsl-swiss.ch" class="btn-login" target="_blank" rel="noopener">Aller sur RSL</a>
</header>

<section class="hero">
  <img src="image/1logo_ridly.png" alt="RIDLY">
  <h1>RIDLY est <span>verrouill√©</span>.</h1>
  <p>
    Pour le moment, l‚Äôacc√®s √† RIDLY est r√©serv√© avec un code.
    <br/>Le site RSL reste <b>libre</b> et accessible √† tous.
  </p>

  <!-- ‚úÖ Unique action visible (RSL) -->
  <a href="https://rsl-swiss.ch" class="btn-primary" target="_blank" rel="noopener">üåê Aller sur RSL</a>

  <!-- ‚úÖ Acc√®s RIDLY uniquement via code -->
  <div class="small-link" id="openCode">
    J‚Äôai un code RIDLY ‚Üí
  </div>
</section>

<footer>
  ¬© <span id="year"></span> RIDLY ‚Äî Acc√®s RIDLY par code uniquement ¬∑ RSL libre.
</footer>

<!-- MODAL CODE -->
<div class="modal" id="codeModal" aria-hidden="true">
  <div class="modal-dim" id="codeDim"></div>
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="codeTitle">
    <div class="modal-title" id="codeTitle">Acc√®s RIDLY (code)</div>
    <div class="modal-sub">
      Entre le code pour d√©bloquer RIDLY sur cet appareil.
    </div>

    <div class="field">
      <input class="input" id="codeInput" type="text" inputmode="text" autocomplete="off" placeholder="Ex : RIDLY2026">
      <div class="msg err" id="codeErr" style="display:none;"></div>
      <div class="msg ok"  id="codeOk"  style="display:none;"></div>
    </div>

    <div class="row-btns">
      <button class="btn btn-ok" id="codeValidate" type="button">D√©bloquer</button>
      <button class="btn btn-cancel" id="codeClose" type="button">Annuler</button>
    </div>
  </div>
</div>

<script>
  // ann√©e footer
  document.getElementById('year').textContent = new Date().getFullYear();

  // intro
  const intro = document.getElementById("intro");
  const steps = document.querySelectorAll(".intro-step");
  const geoLabel = document.getElementById("geo-label");

  function showStep(index){
    steps.forEach((step,i)=>{
      if(i === index) step.classList.add("active");
      else step.classList.remove("active");
    });
  }

  const STEP_DURATION = 1300; // ms
  setTimeout(()=>showStep(1), STEP_DURATION);
  setTimeout(()=>showStep(2), STEP_DURATION*2);
  setTimeout(()=>{
    intro.classList.add("fade-out");
    setTimeout(()=>{
      if(intro && intro.parentNode) intro.parentNode.removeChild(intro);
    }, 650);
  }, STEP_DURATION*3 + 300);

  // geoloc (juste texte)
  if("geolocation" in navigator){
    navigator.geolocation.getCurrentPosition(
      pos=>{
        const { latitude, longitude } = pos.coords;
        geoLabel.textContent = `Position d√©tect√©e ¬∑ ${latitude.toFixed(3)}, ${longitude.toFixed(3)} ‚Äî (RIDLY verrouill√©)`;
      },
      ()=>{},
      { timeout: 2000 }
    );
  }

  // ================== VERROU RIDLY (CODE) ==================
  const ACCESS_KEY = "ridly_access_v1";
  const ACCESS_CODE = "RIDLY2026";

  const modal = document.getElementById("codeModal");
  const dim = document.getElementById("codeDim");
  const openBtn = document.getElementById("openCode");
  const closeBtn = document.getElementById("codeClose");
  const validateBtn = document.getElementById("codeValidate");
  const input = document.getElementById("codeInput");
  const errBox = document.getElementById("codeErr");
  const okBox = document.getElementById("codeOk");

  function showErr(msg){
    okBox.style.display="none";
    errBox.textContent = msg;
    errBox.style.display="block";
  }
  function showOk(msg){
    errBox.style.display="none";
    okBox.textContent = msg;
    okBox.style.display="block";
  }
  function openModal(){
    errBox.style.display="none";
    okBox.style.display="none";
    modal.classList.add("open");
    modal.setAttribute("aria-hidden","false");
    setTimeout(()=>{ try{ input.focus(); }catch(e){} }, 50);
  }
  function closeModal(){
    modal.classList.remove("open");
    modal.setAttribute("aria-hidden","true");
  }

  // si d√©j√† d√©bloqu√©, redirige direct (facultatif)
  try{
    const unlocked = localStorage.getItem(ACCESS_KEY) === "1";
    if(unlocked){
      // ‚úÖ Ici tu choisis la page RIDLY √† ouvrir apr√®s d√©blocage :
      // - compte.html (si tu veux login)
      // - map.html (si tu as une page carte)
      // Pour l‚Äôinstant je mets "compte.html" (modifiable).
      window.location.replace("compte.html");
    }
  }catch(e){}

  openBtn?.addEventListener("click", openModal);
  dim?.addEventListener("click", closeModal);
  closeBtn?.addEventListener("click", closeModal);
  document.addEventListener("keydown", (e)=>{
    if(e.key === "Escape") closeModal();
    if(e.key === "Enter" && modal.classList.contains("open")) validateBtn.click();
  });

  validateBtn?.addEventListener("click", ()=>{
    const val = (input.value || "").trim().toUpperCase();
    if(!val){
      showErr("Entre le code.");
      return;
    }
    if(val !== ACCESS_CODE){
      showErr("Code incorrect.");
      return;
    }
    try{ localStorage.setItem(ACCESS_KEY, "1"); }catch(e){}
    showOk("RIDLY d√©bloqu√© ‚úÖ Redirection...");
    setTimeout(()=>{ window.location.href="compte.html"; }, 700);
  });
</script>

</body>
</html>
